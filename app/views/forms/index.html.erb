<h1>Web版 TYC管理システム</h1>

<h2>おはようございます、<%= @username %> さん</h2>

<p class="notice"><small><%= session[:notice] %></small></p>
<% session[:notice] = nil # 念のため使い終わったら消す %>
<p class="alert"><small><%= session[:error] %></small></p>
<% session[:error] = nil # 念のため使い終わったら消す %>

<%= form_for @form do |f| %>
  <table class="table table-striped table-bordered table-hover">
    <tbody>
    <tr>
      <th>送信先</th>
      <th>取引額</th>
      <th>取引理由</th>
      <th>パスワード</th>
    </tr>
    <%= f.nested_fields_for :parameters, wrapper_tag: :tr do |q| %>
      <td><%= q.select :uid, @target_uids %></td>
      <td><%= q.number_field :tyc, class: 'form-control' %></td>
      <td><%= q.text_field :reason, class: 'form-control' %></td>
      <td><%= q.text_field :password, class: 'form-control' %></td>
      <td><%= q.remove_nested_fields_link 'Delete', class: 'btn btn-danger', role: 'button' %></td>
    <% end %>
    </tbody>
  </table>
  <%= f.add_nested_fields_link :parameters, 'Add new', class: 'btn btn-primary', role: 'button' %>
<% end %>

<style>
  .notice {
    color: #0084f0;
  }

  .alert {
    color: #df434f;
  }
</style>